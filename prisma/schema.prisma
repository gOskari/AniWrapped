// schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("POSTGRES_PRISMA_URL") // uses connection pooling
  directUrl = env("POSTGRES_URL_NON_POOLING") // uses a direct connection
}

model User {
  id                   Int    @id @default(autoincrement())
  name                 String
  updatedAt            String
  anime_minutesWatched Int
  standardDeviation    Int
}

model PageUser {
  id                   Int      @id @default(autoincrement())
  updatedAt            DateTime @default(now())
  name                 String   @unique
  avatar               String
  anime_count          Int
  anime_minutesWatched Int
  genres               Genre[]
}

model Genre {
  id     Int    @id @default(autoincrement())
  genre  String
  count  Int
  userId Int // This is a foreign key linking Genre to PageUser

  user PageUser @relation(fields: [userId], references: [id], onDelete: Cascade)
}
